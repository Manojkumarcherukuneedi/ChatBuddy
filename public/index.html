<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ChatBuddy</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- MENU BUTTON -->
  <div class="menu-btn" onclick="openMenu()">â˜°</div>

  <!-- ACCOUNT BUTTON -->
  <div id="account-btn">
    <img src="https://cdn-icons-png.flaticon.com/512/456/456212.png" alt="User" />
  </div>

  <!-- ACCOUNT DROPDOWN -->
  <div id="account-dropdown">
    <p><strong>Username:</strong> <span id="acc-username">Loading...</span></p>
    <p><strong>Member since:</strong> <span id="acc-created">Loading...</span></p>
  </div>

  <!-- SIDEBAR -->
  <div id="sideMenu" class="side-menu">
    <div class="close-btn" onclick="closeMenu()">âœ•</div>
    <ul class="menu-list">
      <li onclick="goHome()">Home</li>
      <li onclick="openSettings()">Settings</li>
      <li onclick="openPrivacy()">Privacy &amp; Security</li>
      <li onclick="openNotifications()">Notifications</li>
      <li onclick="openAbout()">About</li>
      <li class="logout-item" onclick="logout()">Logout</li>
    </ul>
  </div>

  <!-- OVERLAY FOR SIDEBAR -->
  <div id="overlay" class="overlay" onclick="closeMenu()"></div>

  <!-- MAIN CHAT CARD (HOME) -->
  <div class="chat-container" id="chatContainer">
    <h1 onclick="goHome()">ChatBuddy</h1>
    <div class="toggle-dark" onclick="toggleDark()">ðŸŒ™ Toggle Dark Mode</div>

    <div class="chat-box" id="chatBox">
      <!-- messages injected by chat.js -->
    </div>

    <input id="msgInput" placeholder="Type your message..." />

    <button onclick="sendMsg()">Send</button>
    <button onclick="motivate()">Motivate me</button>
    <button onclick="loadHistory()">Load History</button>
    <button class="danger-btn" onclick="deleteHistory()">Delete History</button>
  </div>

  <!-- SETTINGS PAGE -->
  <div id="settingsPage" class="page">
    <h2>Chat Preferences</h2>

    <div class="card-block">
      <h3>Font Size</h3>
      <label><input type="radio" name="fontSize" value="small"> Small</label><br>
      <label><input type="radio" name="fontSize" value="medium" checked> Medium</label><br>
      <label><input type="radio" name="fontSize" value="large"> Large</label>
    </div>

    <div class="card-block">
      <h3>Theme Colors</h3>
      <label><input type="radio" name="theme" value="light"> Light</label><br>
      <label><input type="radio" name="theme" value="dark" checked> Dark</label><br>
      <label><input type="radio" name="theme" value="colorful"> Colorful</label>
    </div>

    <button>Save</button>
    <button onclick="closePages()">Back</button>
  </div>

  <!-- PRIVACY PAGE -->
  <div id="privacyPage" class="page">
    <h2>Privacy &amp; Security</h2>

    <h3>Change Password</h3>
    <input placeholder="Old Password" type="password" class="full-input">
    <input placeholder="New Password" type="password" class="full-input">

    <button class="primary-btn">Change Password</button>

    <h3 class="section-title">Manage Chats</h3>
    <button class="danger-btn">Delete All Chats</button>

    <button onclick="closePages()">Back to Home</button>
  </div>

  <!-- NOTIFICATIONS PAGE -->
  <div id="notificationsPage" class="page">
    <h2>Notifications</h2>

    <div class="card-block">
      <span class="block-label">Enable/Disable Notifications</span>
      <label class="switch">
        <input type="checkbox" checked>
        <span class="slider"></span>
      </label>
    </div>

    <button onclick="closePages()">Back</button>
  </div>

  <!-- ABOUT PAGE -->
  <div id="aboutPage" class="page">
    <h2>About ChatBuddy</h2>

    <p><strong>Welcome to Chat Buddy!</strong><br>
      Your friendly digital companion designed to brighten your day.</p>

    <p><strong>What Chat Buddy Offers:</strong><br>
      â€¢ Cheerful &amp; supportive chats<br>
      â€¢ Fun, playful interactions<br>
      â€¢ Motivational energy<br>
      â€¢ Relaxing &amp; calming vibes</p>

    <p><strong>Why Chat Buddy?</strong><br>
      Sometimes all we need is support and positivity. ChatBuddy is here for you always.</p>

    <p><strong>Our Mission:</strong><br>
      To make technology feel like a friend.</p>

    <p><strong>Developed By:</strong><br>
      Ashwin Kumar Mandaloju<br>
      Manoj Kumar Cherukuneedi<br>
      Hemanth Cheeruka<br>
      Meet Saspaar<br>
      University of North Texas</p>

    <p class="version-text">Version: 1.0.0</p>

    <button onclick="closePages()">Back</button>
  </div>

  <!-- MAIN CHAT LOGIC -->
  <script src="/js/chat.js"></script>

  <!-- SMALL PAGE / MENU SCRIPT -->
  <script>
    // account dropdown
    document.getElementById("account-btn").onclick = () =>
      document.getElementById("account-dropdown").classList.toggle("show");

    // load profile info
    fetch("/api/profile")
      .then(res => res.json())
      .then(data => {
        document.getElementById("acc-username").textContent = data.username;
        document.getElementById("acc-created").textContent =
          new Date(data.created_at).toDateString();
      })
      .catch(() => {
        // fail silently if API not available
      });

    function showPage(id) {
      closeMenu();
      document.getElementById("chatContainer").style.display = "none";
      document.querySelectorAll(".page").forEach(p => p.style.display = "none");
      document.getElementById(id).style.display = "block";
    }

    function closePages() {
      document.getElementById("chatContainer").style.display = "block";
      document.querySelectorAll(".page").forEach(p => p.style.display = "none");
    }

    function openSettings() { showPage("settingsPage"); }
    function openPrivacy() { showPage("privacyPage"); }
    function openNotifications() { showPage("notificationsPage"); }
    function openAbout() { showPage("aboutPage"); }

    function goHome() {
      closePages();
    }

    function openMenu() {
      document.getElementById("sideMenu").style.left = "0px";
      document.getElementById("overlay").style.display = "block";
    }

    function closeMenu() {
      document.getElementById("sideMenu").style.left = "-260px";
      document.getElementById("overlay").style.display = "none";
    }
  </script>

</body>
</html>
